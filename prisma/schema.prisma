generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id           String        @id @default(cuid())
  name         String?
  email        String        @unique
  image        String?
  role         String        @default("USER")
  createdAt    DateTime      @default(now())
  events       Tournament[]  @relation("OrganizerEvents")
  participants Participant[]
}

model Tournament {
  id           String        @id @default(cuid())
  title        String
  description  String?
  location     String?
  sportType    String?
  startDate    DateTime
  endDate      DateTime?
  price        Float?
  organizer    User          @relation("OrganizerEvents", fields: [organizerId], references: [id])
  organizerId  String
  participants Participant[]
  createdAt    DateTime      @default(now())
}

model Participant {
  id           String      @id @default(cuid())
  user         User        @relation(fields: [userId], references: [id])
  userId       String
  tournament   Tournament  @relation(fields: [tournamentId], references: [id])
  tournamentId String
  status       String      @default("JOINED")
  joinedAt     DateTime    @default(now())

  @@unique([userId, tournamentId])
}
